<HTML>
<HEAD>
<meta charset="UTF-8">
<title>ServiceHub - corda</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">corda</a>&nbsp;/&nbsp;<a href="../index.html">net.corda.core.node</a>&nbsp;/&nbsp;<a href=".">ServiceHub</a><br/>
<br/>
<h1>ServiceHub</h1>
<code><span class="keyword">interface </span><span class="identifier">ServiceHub</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../-services-for-resolution/index.html"><span class="identifier">ServicesForResolution</span></a></code>
<p>A service hub simply vends references to the other services a node has. Some of those services may be missing or
mocked out. This class is useful to pass to chunks of pluggable code that might have need of many different kinds of
functionality and you don't want to hard-code which types in the interface.</p>
<p>Any services exposed to flows (public view) need to implement <a href="#">SerializeAsToken</a> or similar to avoid their internal
state from being serialized in checkpoints.</p>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="clock.html">clock</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">clock</span><span class="symbol">: </span><a href="http://docs.oracle.com/javase/6/docs/api/java/time/Clock.html"><span class="identifier">Clock</span></a></code></td>
</tr>
<tr>
<td>
<a href="key-management-service.html">keyManagementService</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">keyManagementService</span><span class="symbol">: </span><a href="../../net.corda.core.node.services/-key-management-service/index.html"><span class="identifier">KeyManagementService</span></a></code></td>
</tr>
<tr>
<td>
<a href="legal-identity-key.html">legalIdentityKey</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">legalIdentityKey</span><span class="symbol">: </span><a href="http://docs.oracle.com/javase/6/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a></code>
<p>Helper property to shorten code for fetching the Node's KeyPair associated with the
public legalIdentity Party from the key management service.
Typical use is during signing in flows and for unit test signing.</p>
</td>
</tr>
<tr>
<td>
<a href="my-info.html">myInfo</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">myInfo</span><span class="symbol">: </span><a href="../-node-info/index.html"><span class="identifier">NodeInfo</span></a></code></td>
</tr>
<tr>
<td>
<a href="network-map-cache.html">networkMapCache</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">networkMapCache</span><span class="symbol">: </span><a href="../../net.corda.core.node.services/-network-map-cache/index.html"><span class="identifier">NetworkMapCache</span></a></code></td>
</tr>
<tr>
<td>
<a href="network-service.html">networkService</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">networkService</span><span class="symbol">: </span><a href="../../net.corda.core.messaging/-messaging-service/index.html"><span class="identifier">MessagingService</span></a></code></td>
</tr>
<tr>
<td>
<a href="notary-identity-key.html">notaryIdentityKey</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">notaryIdentityKey</span><span class="symbol">: </span><a href="http://docs.oracle.com/javase/6/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a></code>
<p>Helper property to shorten code for fetching the Node's KeyPair associated with the
public notaryIdentity Party from the key management service. It is assumed that this is only
used in contexts where the Node knows it is hosting a Notary Service. Otherwise, it will throw
an IllegalArgumentException.
Typical use is during signing in flows and for unit test signing.</p>
</td>
</tr>
<tr>
<td>
<a href="scheduler-service.html">schedulerService</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">schedulerService</span><span class="symbol">: </span><a href="../../net.corda.core.node.services/-scheduler-service/index.html"><span class="identifier">SchedulerService</span></a></code></td>
</tr>
<tr>
<td>
<a href="storage-service.html">storageService</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">storageService</span><span class="symbol">: </span><a href="../../net.corda.core.node.services/-storage-service/index.html"><span class="identifier">StorageService</span></a></code></td>
</tr>
<tr>
<td>
<a href="vault-service.html">vaultService</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">vaultService</span><span class="symbol">: </span><a href="../../net.corda.core.node.services/-vault-service/index.html"><span class="identifier">VaultService</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Inherited Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="../-services-for-resolution/identity-service.html">identityService</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">identityService</span><span class="symbol">: </span><a href="../../net.corda.core.node.services/-identity-service/index.html"><span class="identifier">IdentityService</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="invoke-flow-async.html">invokeFlowAsync</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">&gt;</span> <span class="identifier">invokeFlowAsync</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.ServiceHub$invokeFlowAsync(java.lang.Class((net.corda.core.flows.FlowLogic((net.corda.core.node.ServiceHub.invokeFlowAsync.T)))), kotlin.Array((kotlin.Any)))/logicType">logicType</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html"><span class="identifier">Class</span></a><span class="symbol">&lt;</span><span class="keyword">out</span>&nbsp;<a href="../../net.corda.core.flows/-flow-logic/index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span><span class="symbol">&gt;</span><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.core.node.ServiceHub$invokeFlowAsync(java.lang.Class((net.corda.core.flows.FlowLogic((net.corda.core.node.ServiceHub.invokeFlowAsync.T)))), kotlin.Array((kotlin.Any)))/args">args</span><span class="symbol">:</span>&nbsp;<span class="identifier">Any</span><span class="symbol">?</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.flows/-flow-state-machine/index.html"><span class="identifier">FlowStateMachine</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span></code>
<p>Will check <a href="invoke-flow-async.html#net.corda.core.node.ServiceHub$invokeFlowAsync(java.lang.Class((net.corda.core.flows.FlowLogic((net.corda.core.node.ServiceHub.invokeFlowAsync.T)))), kotlin.Array((kotlin.Any)))/logicType">logicType</a> and <a href="invoke-flow-async.html#net.corda.core.node.ServiceHub$invokeFlowAsync(java.lang.Class((net.corda.core.flows.FlowLogic((net.corda.core.node.ServiceHub.invokeFlowAsync.T)))), kotlin.Array((kotlin.Any)))/args">args</a> against a whitelist and if acceptable then construct and initiate the flow.
Note that you must be on the server thread to call this method.</p>
</td>
</tr>
<tr>
<td>
<a href="load-state.html">loadState</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">loadState</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.ServiceHub$loadState(net.corda.core.contracts.StateRef)/stateRef">stateRef</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.contracts/-state-ref/index.html"><span class="identifier">StateRef</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.contracts/-transaction-state/index.html"><span class="identifier">TransactionState</span></a><span class="symbol">&lt;</span><span class="identifier">*</span><span class="symbol">&gt;</span></code>
<p>Given a <a href="../../net.corda.core.contracts/-state-ref/index.html">StateRef</a> loads the referenced transaction and looks up the specified output <a href="../../net.corda.core.contracts/-contract-state/index.html">ContractState</a>.</p>
</td>
</tr>
<tr>
<td>
<a href="record-transactions.html">recordTransactions</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">recordTransactions</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.ServiceHub$recordTransactions(kotlin.collections.Iterable((net.corda.core.transactions.SignedTransaction)))/txs">txs</span><span class="symbol">:</span>&nbsp;<span class="identifier">Iterable</span><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code>
<p>Given a <a href="../../net.corda.core.transactions/-signed-transaction/index.html">SignedTransaction</a>, writes it to the local storage for validated transactions and then
sends them to the vault for further processing. Expects to be run within a database transaction.</p>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">recordTransactions</span><span class="symbol">(</span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.core.node.ServiceHub$recordTransactions(kotlin.Array((net.corda.core.transactions.SignedTransaction)))/txs">txs</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code>
<p>Given some <a href="../../net.corda.core.transactions/-signed-transaction/index.html">SignedTransaction</a>s, writes them to the local storage for validated transactions and then
sends them to the vault for further processing.</p>
</td>
</tr>
<tr>
<td>
<a href="to-state-and-ref.html">toStateAndRef</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.contracts/-contract-state/index.html"><span class="identifier">ContractState</span></a><span class="symbol">&gt;</span> <span class="identifier">toStateAndRef</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.ServiceHub$toStateAndRef(net.corda.core.contracts.StateRef)/ref">ref</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.contracts/-state-ref/index.html"><span class="identifier">StateRef</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.contracts/-state-and-ref/index.html"><span class="identifier">StateAndRef</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span></code>
<p>Will check <a href="#">logicType</a> and <a href="#">args</a> against a whitelist and if acceptable then construct and initiate the protocol.</p>
</td>
</tr>
</tbody>
</table>
<h3>Extension Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="../../net.corda.contracts.testing/fill-with-some-test-cash.html">fillWithSomeTestCash</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">ServiceHub</span><span class="symbol">.</span><span class="identifier">fillWithSomeTestCash</span><span class="symbol">(</span><span class="identifier" id="net.corda.contracts.testing$fillWithSomeTestCash(net.corda.core.node.ServiceHub, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.crypto.Party, kotlin.Int, kotlin.Int, java.util.Random, net.corda.core.serialization.OpaqueBytes, net.corda.core.crypto.CompositeKey, net.corda.core.contracts.PartyAndReference, java.security.KeyPair)/howMuch">howMuch</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.contracts/-amount/index.html"><span class="identifier">Amount</span></a><span class="symbol">&lt;</span><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Currency.html"><span class="identifier">Currency</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.contracts.testing$fillWithSomeTestCash(net.corda.core.node.ServiceHub, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.crypto.Party, kotlin.Int, kotlin.Int, java.util.Random, net.corda.core.serialization.OpaqueBytes, net.corda.core.crypto.CompositeKey, net.corda.core.contracts.PartyAndReference, java.security.KeyPair)/outputNotary">outputNotary</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a>&nbsp;<span class="symbol">=</span>&nbsp;DUMMY_NOTARY<span class="symbol">, </span><span class="identifier" id="net.corda.contracts.testing$fillWithSomeTestCash(net.corda.core.node.ServiceHub, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.crypto.Party, kotlin.Int, kotlin.Int, java.util.Random, net.corda.core.serialization.OpaqueBytes, net.corda.core.crypto.CompositeKey, net.corda.core.contracts.PartyAndReference, java.security.KeyPair)/atLeastThisManyStates">atLeastThisManyStates</span><span class="symbol">:</span>&nbsp;<span class="identifier">Int</span>&nbsp;<span class="symbol">=</span>&nbsp;3<span class="symbol">, </span><span class="identifier" id="net.corda.contracts.testing$fillWithSomeTestCash(net.corda.core.node.ServiceHub, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.crypto.Party, kotlin.Int, kotlin.Int, java.util.Random, net.corda.core.serialization.OpaqueBytes, net.corda.core.crypto.CompositeKey, net.corda.core.contracts.PartyAndReference, java.security.KeyPair)/atMostThisManyStates">atMostThisManyStates</span><span class="symbol">:</span>&nbsp;<span class="identifier">Int</span>&nbsp;<span class="symbol">=</span>&nbsp;10<span class="symbol">, </span><span class="identifier" id="net.corda.contracts.testing$fillWithSomeTestCash(net.corda.core.node.ServiceHub, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.crypto.Party, kotlin.Int, kotlin.Int, java.util.Random, net.corda.core.serialization.OpaqueBytes, net.corda.core.crypto.CompositeKey, net.corda.core.contracts.PartyAndReference, java.security.KeyPair)/rng">rng</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Random.html"><span class="identifier">Random</span></a>&nbsp;<span class="symbol">=</span>&nbsp;Random()<span class="symbol">, </span><span class="identifier" id="net.corda.contracts.testing$fillWithSomeTestCash(net.corda.core.node.ServiceHub, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.crypto.Party, kotlin.Int, kotlin.Int, java.util.Random, net.corda.core.serialization.OpaqueBytes, net.corda.core.crypto.CompositeKey, net.corda.core.contracts.PartyAndReference, java.security.KeyPair)/ref">ref</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.serialization/-opaque-bytes/index.html"><span class="identifier">OpaqueBytes</span></a>&nbsp;<span class="symbol">=</span>&nbsp;OpaqueBytes(ByteArray(1, { 1 }))<span class="symbol">, </span><span class="identifier" id="net.corda.contracts.testing$fillWithSomeTestCash(net.corda.core.node.ServiceHub, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.crypto.Party, kotlin.Int, kotlin.Int, java.util.Random, net.corda.core.serialization.OpaqueBytes, net.corda.core.crypto.CompositeKey, net.corda.core.contracts.PartyAndReference, java.security.KeyPair)/ownedBy">ownedBy</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.crypto/-composite-key/index.html"><span class="identifier">CompositeKey</span></a><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">, </span><span class="identifier" id="net.corda.contracts.testing$fillWithSomeTestCash(net.corda.core.node.ServiceHub, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.crypto.Party, kotlin.Int, kotlin.Int, java.util.Random, net.corda.core.serialization.OpaqueBytes, net.corda.core.crypto.CompositeKey, net.corda.core.contracts.PartyAndReference, java.security.KeyPair)/issuedBy">issuedBy</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.contracts/-party-and-reference/index.html"><span class="identifier">PartyAndReference</span></a>&nbsp;<span class="symbol">=</span>&nbsp;DUMMY_CASH_ISSUER<span class="symbol">, </span><span class="identifier" id="net.corda.contracts.testing$fillWithSomeTestCash(net.corda.core.node.ServiceHub, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.crypto.Party, kotlin.Int, kotlin.Int, java.util.Random, net.corda.core.serialization.OpaqueBytes, net.corda.core.crypto.CompositeKey, net.corda.core.contracts.PartyAndReference, java.security.KeyPair)/issuerKey">issuerKey</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a>&nbsp;<span class="symbol">=</span>&nbsp;DUMMY_CASH_ISSUER_KEY<span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.node.services/-vault/index.html"><span class="identifier">Vault</span></a><span class="symbol">&lt;</span><a href="../../net.corda.contracts.asset/-cash/-state/index.html"><span class="identifier">State</span></a><span class="symbol">&gt;</span></code>
<p>Creates a random set of between (by default) 3 and 10 cash states that add up to the given amount and adds them
to the vault. This is intended for unit tests. The cash is issued by <a href="../../net.corda.contracts.asset/-d-u-m-m-y_-c-a-s-h_-i-s-s-u-e-r.html">DUMMY_CASH_ISSUER</a> and owned by the legal
identity key from the storage service.</p>
</td>
</tr>
<tr>
<td>
<a href="../../net.corda.contracts.testing/fill-with-some-test-deals.html">fillWithSomeTestDeals</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">ServiceHub</span><span class="symbol">.</span><span class="identifier">fillWithSomeTestDeals</span><span class="symbol">(</span><span class="identifier" id="net.corda.contracts.testing$fillWithSomeTestDeals(net.corda.core.node.ServiceHub, kotlin.collections.List((kotlin.String)))/dealIds">dealIds</span><span class="symbol">:</span>&nbsp;<span class="identifier">List</span><span class="symbol">&lt;</span><span class="identifier">String</span><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code></td>
</tr>
<tr>
<td>
<a href="../../net.corda.contracts.testing/fill-with-some-test-linear-states.html">fillWithSomeTestLinearStates</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">ServiceHub</span><span class="symbol">.</span><span class="identifier">fillWithSomeTestLinearStates</span><span class="symbol">(</span><span class="identifier" id="net.corda.contracts.testing$fillWithSomeTestLinearStates(net.corda.core.node.ServiceHub, kotlin.Int)/numberToCreate">numberToCreate</span><span class="symbol">:</span>&nbsp;<span class="identifier">Int</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code></td>
</tr>
<tr>
<td>
<a href="../record-transactions.html">recordTransactions</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">ServiceHub</span><span class="symbol">.</span><span class="identifier">recordTransactions</span><span class="symbol">(</span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.core.node$recordTransactions(net.corda.core.node.ServiceHub, kotlin.Array((net.corda.core.transactions.SignedTransaction)))/txs">txs</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code>
<p>Given some <a href="../../net.corda.core.transactions/-signed-transaction/index.html">SignedTransaction</a>s, writes them to the local storage for validated transactions and then
sends them to the vault for further processing.</p>
</td>
</tr>
</tbody>
</table>
<h3>Inheritors</h3>
<table>
<tbody>
<tr>
<td>
<a href="../-plugin-service-hub/index.html">PluginServiceHub</a></td>
<td>
<code><span class="keyword">interface </span><span class="identifier">PluginServiceHub</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">ServiceHub</span></code>
<p>A service hub to be used by the <a href="../-corda-plugin-registry/index.html">CordaPluginRegistry</a></p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
