<HTML>
<HEAD>
<meta charset="UTF-8">
<title>NetworkMapCache - corda</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">corda</a>&nbsp;/&nbsp;<a href="../index.html">net.corda.core.node.services</a>&nbsp;/&nbsp;<a href=".">NetworkMapCache</a><br/>
<br/>
<h1>NetworkMapCache</h1>
<code><span class="keyword">interface </span><span class="identifier">NetworkMapCache</span></code>
<p>A network map contains lists of nodes on the network along with information about their identity keys, services
they provide and host names or IP addresses where they can be connected to. The cache wraps around a map fetched
from an authoritative service, and adds easy lookup of the data stored within it. Generally it would be initialised
with a specified network map service, which it fetches data from and then subscribes to updates of.</p>
<h3>Types</h3>
<table>
<tbody>
<tr>
<td>
<a href="-map-change/index.html">MapChange</a></td>
<td>
<code><span class="keyword">sealed</span> <span class="keyword">class </span><span class="identifier">MapChange</span></code></td>
</tr>
</tbody>
</table>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="changed.html">changed</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">changed</span><span class="symbol">: </span><span class="identifier">Observable</span><span class="symbol">&lt;</span><a href="-map-change/index.html"><span class="identifier">MapChange</span></a><span class="symbol">&gt;</span></code>
<p>Tracks changes to the network map cache</p>
</td>
</tr>
<tr>
<td>
<a href="map-service-registered.html">mapServiceRegistered</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">mapServiceRegistered</span><span class="symbol">: </span><span class="identifier">ListenableFuture</span><span class="symbol">&lt;</span><span class="identifier">Unit</span><span class="symbol">&gt;</span></code>
<p>Future to track completion of the NetworkMapService registration.</p>
</td>
</tr>
<tr>
<td>
<a href="network-map-nodes.html">networkMapNodes</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">networkMapNodes</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code>
<p>A list of nodes that advertise a network map service</p>
</td>
</tr>
<tr>
<td>
<a href="notary-nodes.html">notaryNodes</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">notaryNodes</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code>
<p>A list of nodes that advertise a notary service</p>
</td>
</tr>
<tr>
<td>
<a href="party-nodes.html">partyNodes</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">partyNodes</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code>
<p>A list of all nodes the cache is aware of</p>
</td>
</tr>
<tr>
<td>
<a href="regulator-nodes.html">regulatorNodes</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">regulatorNodes</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code>
<p>A list of nodes that advertise a regulatory service. Identifying the correct regulator for a trade is outside
the scope of the network map service, and this is intended solely as a sanity check on configuration stored
elsewhere.</p>
</td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="add-map-service.html">addMapService</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">addMapService</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$addMapService(net.corda.core.messaging.MessagingService, net.corda.core.messaging.SingleMessageRecipient, kotlin.Boolean, kotlin.Int)/net">net</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.messaging/-messaging-service/index.html"><span class="identifier">MessagingService</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$addMapService(net.corda.core.messaging.MessagingService, net.corda.core.messaging.SingleMessageRecipient, kotlin.Boolean, kotlin.Int)/networkMapAddress">networkMapAddress</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.messaging/-single-message-recipient.html"><span class="identifier">SingleMessageRecipient</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$addMapService(net.corda.core.messaging.MessagingService, net.corda.core.messaging.SingleMessageRecipient, kotlin.Boolean, kotlin.Int)/subscribe">subscribe</span><span class="symbol">:</span>&nbsp;<span class="identifier">Boolean</span><span class="symbol">, </span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$addMapService(net.corda.core.messaging.MessagingService, net.corda.core.messaging.SingleMessageRecipient, kotlin.Boolean, kotlin.Int)/ifChangedSinceVer">ifChangedSinceVer</span><span class="symbol">:</span>&nbsp;<span class="identifier">Int</span><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">)</span><span class="symbol">: </span><span class="identifier">ListenableFuture</span><span class="symbol">&lt;</span><span class="identifier">Unit</span><span class="symbol">&gt;</span></code>
<p>Add a network map service; fetches a copy of the latest map from the service and subscribes to any further
updates.</p>
</td>
</tr>
<tr>
<td>
<a href="add-node.html">addNode</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">addNode</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$addNode(net.corda.core.node.NodeInfo)/node">node</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code>
<p>Adds a node to the local cache (generally only used for adding ourselves).</p>
</td>
</tr>
<tr>
<td>
<a href="deregister-for-updates.html">deregisterForUpdates</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">deregisterForUpdates</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$deregisterForUpdates(net.corda.core.messaging.MessagingService, net.corda.core.node.NodeInfo)/net">net</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.messaging/-messaging-service/index.html"><span class="identifier">MessagingService</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$deregisterForUpdates(net.corda.core.messaging.MessagingService, net.corda.core.node.NodeInfo)/service">service</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">ListenableFuture</span><span class="symbol">&lt;</span><span class="identifier">Unit</span><span class="symbol">&gt;</span></code>
<p>Deregister from updates from the given map service.</p>
</td>
</tr>
<tr>
<td>
<a href="get-any-notary.html">getAnyNotary</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getAnyNotary</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$getAnyNotary(net.corda.core.node.services.ServiceType)/type">type</span><span class="symbol">:</span>&nbsp;<a href="../-service-type/index.html"><span class="identifier">ServiceType</span></a><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">?</span></code>
<p>Returns a notary identity advertised by any of the nodes on the network (chosen at random)</p>
</td>
</tr>
<tr>
<td>
<a href="get-node-by-legal-identity-key.html">getNodeByLegalIdentityKey</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">getNodeByLegalIdentityKey</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$getNodeByLegalIdentityKey(net.corda.core.crypto.CompositeKey)/compositeKey">compositeKey</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.crypto/-composite-key/index.html"><span class="identifier">CompositeKey</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">?</span></code>
<p>Look up the node info for a specific peer key.</p>
</td>
</tr>
<tr>
<td>
<a href="get-node-by-legal-name.html">getNodeByLegalName</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getNodeByLegalName</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$getNodeByLegalName(kotlin.String)/name">name</span><span class="symbol">:</span>&nbsp;<span class="identifier">String</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">?</span></code>
<p>Look up the node info for a legal name.</p>
</td>
</tr>
<tr>
<td>
<a href="get-nodes-by-advertised-service-identity-key.html">getNodesByAdvertisedServiceIdentityKey</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getNodesByAdvertisedServiceIdentityKey</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$getNodesByAdvertisedServiceIdentityKey(net.corda.core.crypto.CompositeKey)/compositeKey">compositeKey</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.crypto/-composite-key/index.html"><span class="identifier">CompositeKey</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code>
<p>Look up all nodes advertising the service owned by <a href="get-nodes-by-advertised-service-identity-key.html#net.corda.core.node.services.NetworkMapCache$getNodesByAdvertisedServiceIdentityKey(net.corda.core.crypto.CompositeKey)/compositeKey">compositeKey</a></p>
</td>
</tr>
<tr>
<td>
<a href="get-nodes-with-service.html">getNodesWithService</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getNodesWithService</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$getNodesWithService(net.corda.core.node.services.ServiceType)/serviceType">serviceType</span><span class="symbol">:</span>&nbsp;<a href="../-service-type/index.html"><span class="identifier">ServiceType</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code>
<p>Get the collection of nodes which advertise a specific service.</p>
</td>
</tr>
<tr>
<td>
<a href="get-notary.html">getNotary</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getNotary</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$getNotary(kotlin.String)/name">name</span><span class="symbol">:</span>&nbsp;<span class="identifier">String</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">?</span></code>
<p>Gets a notary identity by the given name.</p>
</td>
</tr>
<tr>
<td>
<a href="get-party-info.html">getPartyInfo</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">getPartyInfo</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$getPartyInfo(net.corda.core.crypto.Party)/party">party</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../-party-info/index.html"><span class="identifier">PartyInfo</span></a><span class="symbol">?</span></code>
<p>Returns information about the party, which may be a specific node or a service</p>
</td>
</tr>
<tr>
<td>
<a href="get-recommended.html">getRecommended</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getRecommended</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$getRecommended(net.corda.core.node.services.ServiceType, net.corda.core.contracts.Contract, kotlin.Array((net.corda.core.crypto.Party)))/type">type</span><span class="symbol">:</span>&nbsp;<a href="../-service-type/index.html"><span class="identifier">ServiceType</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$getRecommended(net.corda.core.node.services.ServiceType, net.corda.core.contracts.Contract, kotlin.Array((net.corda.core.crypto.Party)))/contract">contract</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.contracts/-contract/index.html"><span class="identifier">Contract</span></a><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.core.node.services.NetworkMapCache$getRecommended(net.corda.core.node.services.ServiceType, net.corda.core.contracts.Contract, kotlin.Array((net.corda.core.crypto.Party)))/party">party</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">?</span></code>
<p>Get a recommended node that advertises a service, and is suitable for the specified contract and parties.
Implementations might understand, for example, the correct regulator to use for specific contracts/parties,
or the appropriate oracle for a contract.</p>
</td>
</tr>
<tr>
<td>
<a href="is-notary.html">isNotary</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">isNotary</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$isNotary(net.corda.core.crypto.Party)/party">party</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Boolean</span></code>
<p>Checks whether a given party is an advertised notary identity</p>
</td>
</tr>
<tr>
<td>
<a href="is-validating-notary.html">isValidatingNotary</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">isValidatingNotary</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$isValidatingNotary(net.corda.core.crypto.Party)/party">party</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Boolean</span></code>
<p>Checks whether a given party is an advertised validating notary identity</p>
</td>
</tr>
<tr>
<td>
<a href="remove-node.html">removeNode</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">removeNode</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.node.services.NetworkMapCache$removeNode(net.corda.core.node.NodeInfo)/node">node</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code>
<p>Removes a node from the local cache.</p>
</td>
</tr>
<tr>
<td>
<a href="run-without-map-service.html">runWithoutMapService</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">runWithoutMapService</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code>
<p>For testing where the network map cache is manipulated marks the service as immediately ready.</p>
</td>
</tr>
<tr>
<td>
<a href="track.html">track</a></td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">track</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Pair</span><span class="symbol">&lt;</span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span><span class="symbol">,</span>&nbsp;<span class="identifier">Observable</span><span class="symbol">&lt;</span><a href="-map-change/index.html"><span class="identifier">MapChange</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code>
<p>Atomically get the current party nodes and a stream of updates. Note that the Observable buffers updates until the
first subscriber is registered so as to avoid racing with early updates.</p>
</td>
</tr>
</tbody>
</table>
<h3>Inheritors</h3>
<table>
<tbody>
<tr>
<td>
<a href="../../net.corda.node.services.network/-in-memory-network-map-cache/index.html">InMemoryNetworkMapCache</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">InMemoryNetworkMapCache</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.serialization/-singleton-serialize-as-token/index.html"><span class="identifier">SingletonSerializeAsToken</span></a><span class="symbol">, </span><span class="identifier">NetworkMapCache</span></code>
<p>Extremely simple in-memory cache of the network map.</p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
