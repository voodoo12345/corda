<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_121) on Thu Mar 02 15:43:12 GMT 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>StateMachineManager</title>
<meta name="date" content="2017-03-02">
<meta name="keywords" content="net.corda.node.services.statemachine.StateMachineManager class">
<meta name="keywords" content="Companion">
<meta name="keywords" content="getScheduler()">
<meta name="keywords" content="findStateMachines()">
<meta name="keywords" content="getAllStateMachines()">
<meta name="keywords" content="getChanges()">
<meta name="keywords" content="start()">
<meta name="keywords" content="stop()">
<meta name="keywords" content="track()">
<meta name="keywords" content="add()">
<meta name="keywords" content="getServiceHub()">
<meta name="keywords" content="getCheckpointStorage()">
<meta name="keywords" content="getExecutor()">
<meta name="keywords" content="getDatabase()">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="StateMachineManager";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/corda/node/services/statemachine/StackSnapshot.html" title="class in net.corda.node.services.statemachine"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../net/corda/node/services/statemachine/WaitForLedgerCommit.html" title="class in net.corda.node.services.statemachine"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/corda/node/services/statemachine/StateMachineManager.html" target="_top">Frames</a></li>
<li><a href="StateMachineManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.corda.node.services.statemachine</div>
<h2 title="Class StateMachineManager" class="title">Class StateMachineManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>net.corda.node.services.statemachine.StateMachineManager</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">StateMachineManager</span></pre>
<div class="block"><p><p>A StateMachineManager is responsible for coordination and persistence of multiple <a href="../../../../../net/corda/core/flows/FlowStateMachine.html" title="interface in net.corda.core.flows"><code>interface FlowStateMachine</code></a> objects.
Each such object represents an instantiation of a (two-party) flow that has reached a particular point.</p></p><p><p><p>An implementation of this class will persist state machines to long term storage so they can survive process restarts
and, if run with a single-threaded executor, will ensure no two state machines run concurrently with each other
(bad for performance, good for programmer mental health!).</p><p>A "state machine" is a class with a single call method. The call method and any others it invokes are rewritten by
a bytecode rewriting engine called Quasar, to ensure the code can be suspended and resumed at any point.</p><p>The SMM will always invoke the flow fibers on the given <a href="../../../../../net/corda/node/utilities/AffinityExecutor.html" title="interface in net.corda.node.utilities"><code>interface AffinityExecutor</code></a>, regardless of which thread actually
starts them via add.</p><p>TODO: Consider the issue of continuation identity more deeply: is it a safe assumption that a serialised
    continuation is always unique?
TODO: Think about how to bring the system to a clean stop so it can be upgraded without any serialised stacks on disk
TODO: Timeouts
TODO: Surfacing of exceptions via an API and/or management UI
TODO: Ability to control checkpointing explicitly, for cases where you know replaying a message can't hurt
TODO: Don't store all active flows in memory, load from the database on demand.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/flows/FlowStateMachine.html" title="interface in net.corda.core.flows"><code>interface FlowStateMachine</code></a>, 
<a href="../../../../../net/corda/node/utilities/AffinityExecutor.html" title="interface in net.corda.node.utilities"><code>interface AffinityExecutor</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.Change.html" title="class in net.corda.node.services.statemachine">StateMachineManager.Change</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.Companion.html" title="class in net.corda.node.services.statemachine">StateMachineManager.Companion</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.FiberScheduler.html" title="class in net.corda.node.services.statemachine">StateMachineManager.FiberScheduler</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.Companion.html" title="type parameter in StateMachineManager.Companion">StateMachineManager.Companion</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#Companion">Companion</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#StateMachineManager-serviceHub-tokenizableServices-checkpointStorage-executor-database-unfinishedFibers-">StateMachineManager</a></span>(<a href="../../../../../net/corda/node/services/api/ServiceHubInternal.html" title="type parameter in ServiceHubInternal">ServiceHubInternal</a>&nbsp;serviceHub,
                   java.util.List&lt;? extends java.lang.Object&gt;&nbsp;tokenizableServices,
                   <a href="../../../../../net/corda/node/services/api/CheckpointStorage.html" title="type parameter in CheckpointStorage">CheckpointStorage</a>&nbsp;checkpointStorage,
                   <a href="../../../../../net/corda/node/utilities/AffinityExecutor.html" title="type parameter in AffinityExecutor">AffinityExecutor</a>&nbsp;executor,
                   org.jetbrains.exposed.sql.Database&nbsp;database,
                   org.apache.activemq.artemis.utils.ReusableLatch&nbsp;unfinishedFibers)</code>
<div class="block">A StateMachineManager is responsible for coordination and persistence of multiple <a href="../../../../../net/corda/core/flows/FlowStateMachine.html" title="interface in net.corda.core.flows"><code>interface FlowStateMachine</code></a> objects.
Each such object represents an instantiation of a (two-party) flow that has reached a particular point.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="../../../../../net/corda/core/flows/FlowStateMachine.html" title="type parameter in FlowStateMachine">FlowStateMachine</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#add-logic-">add</a></span>(<a href="../../../../../net/corda/core/flows/FlowLogic.html" title="type parameter in FlowLogic">FlowLogic</a>&lt;? extends T&gt;&nbsp;logic)</code>
<div class="block">Kicks off a brand new state machine of the given class.
The state machine will be persisted when it suspends, with automated restart if the StateMachineManager is
restarted with checkpointed state machines in the storage service.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>&lt;P extends <a href="../../../../../net/corda/core/flows/FlowLogic.html" title="type parameter in FlowLogic">FlowLogic</a>&lt;? extends T&gt;,T&gt;<br>java.util.List&lt;kotlin.Pair&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#findStateMachines-flowClass-">findStateMachines</a></span>(java.lang.Class&lt;P&gt;&nbsp;flowClass)</code>
<div class="block">Returns a list of all state machines executing the given flow logic at the top level (subflows do not count)</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.util.List&lt;net.corda.core.flows.FlowLogic&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#getAllStateMachines--">getAllStateMachines</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>rx.Observable&lt;net.corda.node.services.statemachine.StateMachineManager.Change&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#getChanges--">getChanges</a></span>()</code>
<div class="block">An observable that emits triples of the changing flow, the type of change, and a process-specific ID number
which may change across restarts.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../net/corda/node/services/api/CheckpointStorage.html" title="type parameter in CheckpointStorage">CheckpointStorage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#getCheckpointStorage--">getCheckpointStorage</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>org.jetbrains.exposed.sql.Database</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#getDatabase--">getDatabase</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../../net/corda/node/utilities/AffinityExecutor.html" title="type parameter in AffinityExecutor">AffinityExecutor</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#getExecutor--">getExecutor</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.FiberScheduler.html" title="type parameter in StateMachineManager.FiberScheduler">StateMachineManager.FiberScheduler</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#getScheduler--">getScheduler</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../../../net/corda/node/services/api/ServiceHubInternal.html" title="type parameter in ServiceHubInternal">ServiceHubInternal</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#getServiceHub--">getServiceHub</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#start--">start</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#stop-allowedUnsuspendedFiberCount-">stop</a></span>(int&nbsp;allowedUnsuspendedFiberCount)</code>
<div class="block">Start the shutdown process, bringing the <a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html" title="class in net.corda.node.services.statemachine"><code>class StateMachineManager</code></a> to a controlled stop.  When this method returns,
all Fibers have been suspended and checkpointed, or have completed.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>kotlin.Pair&lt;java.util.List,rx.Observable&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html#track--">track</a></span>()</code>
<div class="block">Atomic get snapshot + subscribe. This is needed so we don't miss updates between subscriptions to changes and
calls to allStateMachines</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="Companion">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Companion</h4>
<pre>public static&nbsp;<a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.Companion.html" title="type parameter in StateMachineManager.Companion">StateMachineManager.Companion</a> Companion</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="StateMachineManager-serviceHub-tokenizableServices-checkpointStorage-executor-database-unfinishedFibers-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>StateMachineManager</h4>
<pre>public&nbsp;StateMachineManager(<a href="../../../../../net/corda/node/services/api/ServiceHubInternal.html" title="type parameter in ServiceHubInternal">ServiceHubInternal</a>&nbsp;serviceHub,
                           java.util.List&lt;? extends java.lang.Object&gt;&nbsp;tokenizableServices,
                           <a href="../../../../../net/corda/node/services/api/CheckpointStorage.html" title="type parameter in CheckpointStorage">CheckpointStorage</a>&nbsp;checkpointStorage,
                           <a href="../../../../../net/corda/node/utilities/AffinityExecutor.html" title="type parameter in AffinityExecutor">AffinityExecutor</a>&nbsp;executor,
                           org.jetbrains.exposed.sql.Database&nbsp;database,
                           org.apache.activemq.artemis.utils.ReusableLatch&nbsp;unfinishedFibers)</pre>
<div class="block"><p><p>A StateMachineManager is responsible for coordination and persistence of multiple <a href="../../../../../net/corda/core/flows/FlowStateMachine.html" title="interface in net.corda.core.flows"><code>interface FlowStateMachine</code></a> objects.
Each such object represents an instantiation of a (two-party) flow that has reached a particular point.</p></p><p><p><p>An implementation of this class will persist state machines to long term storage so they can survive process restarts
and, if run with a single-threaded executor, will ensure no two state machines run concurrently with each other
(bad for performance, good for programmer mental health!).</p><p>A "state machine" is a class with a single call method. The call method and any others it invokes are rewritten by
a bytecode rewriting engine called Quasar, to ensure the code can be suspended and resumed at any point.</p><p>The SMM will always invoke the flow fibers on the given <a href="../../../../../net/corda/node/utilities/AffinityExecutor.html" title="interface in net.corda.node.utilities"><code>interface AffinityExecutor</code></a>, regardless of which thread actually
starts them via add.</p><p>TODO: Consider the issue of continuation identity more deeply: is it a safe assumption that a serialised
    continuation is always unique?
TODO: Think about how to bring the system to a clean stop so it can be upgraded without any serialised stacks on disk
TODO: Timeouts
TODO: Surfacing of exceptions via an API and/or management UI
TODO: Ability to control checkpointing explicitly, for cases where you know replaying a message can't hurt
TODO: Don't store all active flows in memory, load from the database on demand.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/flows/FlowStateMachine.html" title="interface in net.corda.core.flows"><code>interface FlowStateMachine</code></a>, 
<a href="../../../../../net/corda/node/utilities/AffinityExecutor.html" title="interface in net.corda.node.utilities"><code>interface AffinityExecutor</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getScheduler--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getScheduler</h4>
<pre>public&nbsp;<a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.FiberScheduler.html" title="type parameter in StateMachineManager.FiberScheduler">StateMachineManager.FiberScheduler</a>&nbsp;getScheduler()</pre>
</li>
</ul>
<a name="findStateMachines-flowClass-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findStateMachines</h4>
<pre>public&nbsp;&lt;P extends <a href="../../../../../net/corda/core/flows/FlowLogic.html" title="type parameter in FlowLogic">FlowLogic</a>&lt;? extends T&gt;,T&gt;&nbsp;java.util.List&lt;kotlin.Pair&gt;&nbsp;findStateMachines(java.lang.Class&lt;P&gt;&nbsp;flowClass)</pre>
<div class="block"><p><p>Returns a list of all state machines executing the given flow logic at the top level (subflows do not count)</p></p></div>
</li>
</ul>
<a name="getAllStateMachines--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllStateMachines</h4>
<pre>public&nbsp;java.util.List&lt;net.corda.core.flows.FlowLogic&gt;&nbsp;getAllStateMachines()</pre>
</li>
</ul>
<a name="getChanges--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getChanges</h4>
<pre>public&nbsp;rx.Observable&lt;net.corda.node.services.statemachine.StateMachineManager.Change&gt;&nbsp;getChanges()</pre>
<div class="block"><p><p>An observable that emits triples of the changing flow, the type of change, and a process-specific ID number
which may change across restarts.</p></p><p><p><p>We use assignment here so that multiple subscribers share the same wrapped Observable.</p></p></p></div>
</li>
</ul>
<a name="start--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;void&nbsp;start()</pre>
</li>
</ul>
<a name="stop-allowedUnsuspendedFiberCount-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre>public&nbsp;void&nbsp;stop(int&nbsp;allowedUnsuspendedFiberCount)</pre>
<div class="block"><p><p>Start the shutdown process, bringing the <a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html" title="class in net.corda.node.services.statemachine"><code>class StateMachineManager</code></a> to a controlled stop.  When this method returns,
all Fibers have been suspended and checkpointed, or have completed.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>allowedUnsuspendedFiberCount</code> - Optional parameter is used in some tests.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/node/services/statemachine/StateMachineManager.html" title="class in net.corda.node.services.statemachine"><code>class StateMachineManager</code></a></dd>
</dl>
</li>
</ul>
<a name="track--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>track</h4>
<pre>public&nbsp;kotlin.Pair&lt;java.util.List,rx.Observable&gt;&nbsp;track()</pre>
<div class="block"><p><p>Atomic get snapshot + subscribe. This is needed so we don't miss updates between subscriptions to changes and
calls to allStateMachines</p></p></div>
</li>
</ul>
<a name="add-logic-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;<a href="../../../../../net/corda/core/flows/FlowStateMachine.html" title="type parameter in FlowStateMachine">FlowStateMachine</a>&lt;T&gt;&nbsp;add(<a href="../../../../../net/corda/core/flows/FlowLogic.html" title="type parameter in FlowLogic">FlowLogic</a>&lt;? extends T&gt;&nbsp;logic)</pre>
<div class="block"><p><p>Kicks off a brand new state machine of the given class.
The state machine will be persisted when it suspends, with automated restart if the StateMachineManager is
restarted with checkpointed state machines in the storage service.</p></p><p><p><p>Note that you must be on the executor thread.</p></p></p></div>
</li>
</ul>
<a name="getServiceHub--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServiceHub</h4>
<pre>public&nbsp;<a href="../../../../../net/corda/node/services/api/ServiceHubInternal.html" title="type parameter in ServiceHubInternal">ServiceHubInternal</a>&nbsp;getServiceHub()</pre>
</li>
</ul>
<a name="getCheckpointStorage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckpointStorage</h4>
<pre>public&nbsp;<a href="../../../../../net/corda/node/services/api/CheckpointStorage.html" title="type parameter in CheckpointStorage">CheckpointStorage</a>&nbsp;getCheckpointStorage()</pre>
</li>
</ul>
<a name="getExecutor--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExecutor</h4>
<pre>public&nbsp;<a href="../../../../../net/corda/node/utilities/AffinityExecutor.html" title="type parameter in AffinityExecutor">AffinityExecutor</a>&nbsp;getExecutor()</pre>
</li>
</ul>
<a name="getDatabase--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getDatabase</h4>
<pre>public&nbsp;org.jetbrains.exposed.sql.Database&nbsp;getDatabase()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/corda/node/services/statemachine/StackSnapshot.html" title="class in net.corda.node.services.statemachine"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../net/corda/node/services/statemachine/WaitForLedgerCommit.html" title="class in net.corda.node.services.statemachine"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/corda/node/services/statemachine/StateMachineManager.html" target="_top">Frames</a></li>
<li><a href="StateMachineManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
