<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_121) on Thu Mar 02 15:43:10 GMT 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>NodeSchedulerService</title>
<meta name="date" content="2017-03-02">
<meta name="keywords" content="net.corda.node.services.events.NodeSchedulerService class">
<meta name="keywords" content="start()">
<meta name="keywords" content="scheduleStateActivity()">
<meta name="keywords" content="unscheduleStateActivity()">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="NodeSchedulerService";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/corda/node/services/events/RunScheduled.Companion.html" title="class in net.corda.node.services.events"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../net/corda/node/services/events/Companion.RUNNING.html" title="class in net.corda.node.services.events"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/corda/node/services/events/NodeSchedulerService.html" target="_top">Frames</a></li>
<li><a href="NodeSchedulerService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.corda.node.services.events</div>
<h2 title="Class NodeSchedulerService" class="title">Class NodeSchedulerService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>SingletonSerializeAsToken</li>
<li>
<ul class="inheritance">
<li>net.corda.node.services.events.NodeSchedulerService</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../net/corda/core/node/services/SchedulerService.html" title="interface in net.corda.core.node.services">SchedulerService</a>, <a href="../../../../../net/corda/core/serialization/SerializeAsToken.html" title="interface in net.corda.core.serialization">SerializeAsToken</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">NodeSchedulerService</span>
extends SingletonSerializeAsToken
implements <a href="../../../../../net/corda/core/node/services/SchedulerService.html" title="interface in net.corda.core.node.services">SchedulerService</a></pre>
<div class="block"><p><p>A first pass of a simple <a href="../../../../../net/corda/core/node/services/SchedulerService.html" title="interface in net.corda.core.node.services"><code>interface SchedulerService</code></a> that works with <a href="../../../../../net/corda/node/utilities/MutableClock.html" title="class in net.corda.node.utilities"><code>class MutableClock</code></a>s for testing, demonstrations and simulations
that also encompasses the <a href="#">Vault</a> observer for processing transactions.</p></p><p><p><p>This will observe transactions as they are stored and schedule and unschedule activities based on the States consumed
or produced.</p><p>Currently does not provide any system state other than the ContractState so the expectation is that a transaction
is the outcome of the activity in order to schedule another activity.  Once we have implemented more persistence
in the nodes, maybe we can consider multiple activities and whether the activities have been completed or not,
but that starts to sound a lot like off-ledger state.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/node/services/SchedulerService.html" title="interface in net.corda.core.node.services"><code>interface SchedulerService</code></a>, 
<a href="../../../../../net/corda/node/utilities/MutableClock.html" title="class in net.corda.node.utilities"><code>class MutableClock</code></a>, 
<a href="#">Vault</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/events/NodeSchedulerService.RunScheduled.html" title="class in net.corda.node.services.events">NodeSchedulerService.RunScheduled</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/events/NodeSchedulerService.html#NodeSchedulerService-database-services-flowLogicRefFactory-schedulerTimerExecutor-unfinishedSchedules-">NodeSchedulerService</a></span>(org.jetbrains.exposed.sql.Database&nbsp;database,
                    <a href="../../../../../net/corda/node/services/api/ServiceHubInternal.html" title="type parameter in ServiceHubInternal">ServiceHubInternal</a>&nbsp;services,
                    <a href="../../../../../net/corda/core/flows/FlowLogicRefFactory.html" title="type parameter in FlowLogicRefFactory">FlowLogicRefFactory</a>&nbsp;flowLogicRefFactory,
                    java.util.concurrent.Executor&nbsp;schedulerTimerExecutor,
                    org.apache.activemq.artemis.utils.ReusableLatch&nbsp;unfinishedSchedules)</code>
<div class="block">A first pass of a simple <a href="../../../../../net/corda/core/node/services/SchedulerService.html" title="interface in net.corda.core.node.services"><code>interface SchedulerService</code></a> that works with <a href="../../../../../net/corda/node/utilities/MutableClock.html" title="class in net.corda.node.utilities"><code>class MutableClock</code></a>s for testing, demonstrations and simulations
that also encompasses the <a href="#">Vault</a> observer for processing transactions.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/events/NodeSchedulerService.html#scheduleStateActivity-action-">scheduleStateActivity</a></span>(<a href="../../../../../net/corda/core/contracts/ScheduledStateRef.html" title="type parameter in ScheduledStateRef">ScheduledStateRef</a>&nbsp;action)</code>
<div class="block">Schedule a new activity for a TX output, probably because it was just produced.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/events/NodeSchedulerService.html#start--">start</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/node/services/events/NodeSchedulerService.html#unscheduleStateActivity-ref-">unscheduleStateActivity</a></span>(<a href="../../../../../net/corda/core/contracts/StateRef.html" title="type parameter in StateRef">StateRef</a>&nbsp;ref)</code>
<div class="block">Unschedule all activity for a TX output, probably because it was consumed.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.net.corda.core.serialization.SingletonSerializeAsToken">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;net.corda.core.serialization.<a href="../../../../../net/corda/core/serialization/SingletonSerializeAsToken.html" title="class in net.corda.core.serialization">SingletonSerializeAsToken</a></h3>
<code><a href="../../../../../net/corda/core/serialization/SingletonSerializeAsToken.html#toToken-context-">toToken</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.net.corda.core.node.services.SchedulerService">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;net.corda.core.node.services.<a href="../../../../../net/corda/core/node/services/SchedulerService.html" title="interface in net.corda.core.node.services">SchedulerService</a></h3>
<code><a href="../../../../../net/corda/core/node/services/SchedulerService.html#scheduleStateActivity-action-">scheduleStateActivity</a>, <a href="../../../../../net/corda/core/node/services/SchedulerService.html#unscheduleStateActivity-ref-">unscheduleStateActivity</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.net.corda.core.serialization.SerializeAsToken">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;net.corda.core.serialization.<a href="../../../../../net/corda/core/serialization/SerializeAsToken.html" title="interface in net.corda.core.serialization">SerializeAsToken</a></h3>
<code><a href="../../../../../net/corda/core/serialization/SerializeAsToken.html#toToken-context-">toToken</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="NodeSchedulerService-database-services-flowLogicRefFactory-schedulerTimerExecutor-unfinishedSchedules-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NodeSchedulerService</h4>
<pre>public&nbsp;NodeSchedulerService(org.jetbrains.exposed.sql.Database&nbsp;database,
                            <a href="../../../../../net/corda/node/services/api/ServiceHubInternal.html" title="type parameter in ServiceHubInternal">ServiceHubInternal</a>&nbsp;services,
                            <a href="../../../../../net/corda/core/flows/FlowLogicRefFactory.html" title="type parameter in FlowLogicRefFactory">FlowLogicRefFactory</a>&nbsp;flowLogicRefFactory,
                            java.util.concurrent.Executor&nbsp;schedulerTimerExecutor,
                            org.apache.activemq.artemis.utils.ReusableLatch&nbsp;unfinishedSchedules)</pre>
<div class="block"><p><p>A first pass of a simple <a href="../../../../../net/corda/core/node/services/SchedulerService.html" title="interface in net.corda.core.node.services"><code>interface SchedulerService</code></a> that works with <a href="../../../../../net/corda/node/utilities/MutableClock.html" title="class in net.corda.node.utilities"><code>class MutableClock</code></a>s for testing, demonstrations and simulations
that also encompasses the <a href="#">Vault</a> observer for processing transactions.</p></p><p><p><p>This will observe transactions as they are stored and schedule and unschedule activities based on the States consumed
or produced.</p><p>Currently does not provide any system state other than the ContractState so the expectation is that a transaction
is the outcome of the activity in order to schedule another activity.  Once we have implemented more persistence
in the nodes, maybe we can consider multiple activities and whether the activities have been completed or not,
but that starts to sound a lot like off-ledger state.</p></p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>services</code> - Core node services.</dd>
<dd><code>flowLogicRefFactory</code> - Factory for restoring <a href="../../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a> instances from references.</dd>
<dd><code>schedulerTimerExecutor</code> - The executor the scheduler blocks on waiting for the clock to advance to the next
activity.  Only replace this for unit testing purposes.  This is not the executor the <a href="../../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a> is launched on.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/node/services/SchedulerService.html" title="interface in net.corda.core.node.services"><code>interface SchedulerService</code></a>, 
<a href="../../../../../net/corda/node/utilities/MutableClock.html" title="class in net.corda.node.utilities"><code>class MutableClock</code></a>, 
<a href="#">Vault</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="start--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;void&nbsp;start()</pre>
</li>
</ul>
<a name="scheduleStateActivity-action-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduleStateActivity</h4>
<pre>public&nbsp;void&nbsp;scheduleStateActivity(<a href="../../../../../net/corda/core/contracts/ScheduledStateRef.html" title="type parameter in ScheduledStateRef">ScheduledStateRef</a>&nbsp;action)</pre>
<div class="block"><p><p>Schedule a new activity for a TX output, probably because it was just produced.</p></p><p><p><p>Only one activity can be scheduled for a particular <a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a> at any one time.  Scheduling a <a href="../../../../../net/corda/core/contracts/ScheduledStateRef.html" title="class in net.corda.core.contracts"><code>class ScheduledStateRef</code></a>
replaces any previously scheduled <a href="../../../../../net/corda/core/contracts/ScheduledStateRef.html" title="class in net.corda.core.contracts"><code>class ScheduledStateRef</code></a> for any one <a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a>.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a>, 
<a href="../../../../../net/corda/core/contracts/ScheduledStateRef.html" title="class in net.corda.core.contracts"><code>class ScheduledStateRef</code></a>, 
<a href="../../../../../net/corda/core/contracts/ScheduledStateRef.html" title="class in net.corda.core.contracts"><code>class ScheduledStateRef</code></a>, 
<a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a></dd>
</dl>
</li>
</ul>
<a name="unscheduleStateActivity-ref-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>unscheduleStateActivity</h4>
<pre>public&nbsp;void&nbsp;unscheduleStateActivity(<a href="../../../../../net/corda/core/contracts/StateRef.html" title="type parameter in StateRef">StateRef</a>&nbsp;ref)</pre>
<div class="block"><p><p>Unschedule all activity for a TX output, probably because it was consumed.</p></p></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/corda/node/services/events/RunScheduled.Companion.html" title="class in net.corda.node.services.events"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../net/corda/node/services/events/Companion.RUNNING.html" title="class in net.corda.node.services.events"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/corda/node/services/events/NodeSchedulerService.html" target="_top">Frames</a></li>
<li><a href="NodeSchedulerService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
